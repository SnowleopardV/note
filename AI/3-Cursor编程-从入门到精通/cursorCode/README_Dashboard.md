# 香港疫情数据可视化大屏

基于Flask + ECharts的现代化疫情数据可视化大屏，提供实时数据展示和交互式图表。

## 功能特点

### 📊 5个核心图表
1. **每日新增确诊趋势图** - 折线图展示每日新增确诊变化
2. **累计确诊趋势图** - 折线图展示累计确诊增长趋势
3. **各地区累计确诊分布** - 饼图展示各区域确诊分布
4. **新增确诊与康复对比图** - 柱状图对比每日新增和康复情况
5. **各地区发病率排行** - 横向柱状图展示各区域发病率排名

### 🎯 统计卡片
- 累计确诊总数
- 现存确诊数量
- 累计康复数量
- 累计死亡数量

### ✨ 界面特色
- **单屏展示** - 所有图表在一个屏幕内完整展示，无需滚动
- 现代化深色主题设计
- 响应式布局，支持移动端
- 实时数据更新（每5分钟）
- 交互式图表，支持悬停查看详情
- 毛玻璃效果和渐变背景
- 紧凑布局优化，适合大屏展示

## 布局设计

### 屏幕布局结构
```
┌─────────────────────────────────────────────────────────┐
│                    标题栏                                │
├─────────────────────────────────────────────────────────┤
│  统计卡片1  │  统计卡片2  │  统计卡片3  │  统计卡片4    │
├─────────────────────────────────────────────────────────┤
│  图表1: 每日新增趋势  │  图表2: 累计确诊趋势            │
├─────────────────────────────────────────────────────────┤
│  图表3: 地区分布      │  图表4: 新增康复对比            │
├─────────────────────────────────────────────────────────┤
│              图表5: 地区发病率排行                      │
└─────────────────────────────────────────────────────────┘
```

### 响应式适配
- **大屏 (1920x1080+)** - 完整展示所有内容
- **中等屏幕 (1200px+)** - 自动调整布局
- **小屏/移动端** - 垂直堆叠布局

## 技术栈

- **后端**: Flask (Python)
- **前端**: HTML5 + CSS3 + JavaScript
- **图表库**: ECharts 5.4.3
- **数据处理**: Pandas
- **数据源**: Excel文件

## 快速开始

### 1. 环境要求
- Python 3.7+
- 香港疫情数据Excel文件

### 2. 安装依赖
```bash
# 方法1: 使用启动脚本（推荐）
python run_dashboard.py

# 方法2: 手动安装
pip install -r requirements_flask.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

### 3. 启动应用
```bash
# 方法1: 使用启动脚本
python run_dashboard.py

# 方法2: 直接运行Flask应用
python app.py
```

### 4. 访问应用
打开浏览器访问: http://localhost:8080

### 5. 布局预览
查看布局效果: 打开 `test_layout.html` 文件

## 项目结构

```
cursorCode/
├── app.py                    # Flask主应用
├── run_dashboard.py          # 启动脚本
├── test_layout.html          # 布局预览页面
├── requirements_flask.txt    # 依赖包列表
├── 香港各区疫情数据_20250322.xlsx  # 数据文件
├── templates/
│   └── index.html           # 主页面模板
├── static/
│   ├── css/
│   │   └── style.css        # 样式文件
│   └── js/
│       └── dashboard.js     # 前端逻辑
└── README_Dashboard.md      # 说明文档
```

## API接口

### 1. 汇总统计数据
- **URL**: `/api/summary_stats`
- **方法**: GET
- **返回**: 总体统计数据

### 2. 每日统计数据
- **URL**: `/api/daily_stats`
- **方法**: GET
- **返回**: 每日趋势数据

### 3. 地区统计数据
- **URL**: `/api/district_stats`
- **方法**: GET
- **返回**: 各地区分布数据

## 数据格式要求

Excel文件应包含以下列：
- `报告日期`: 日期格式
- `地区名称`: 地区名称
- `新增确诊`: 数值
- `累计确诊`: 数值
- `现存确诊`: 数值
- `新增康复`: 数值
- `累计康复`: 数值
- `新增死亡`: 数值
- `累计死亡`: 数值
- `人口`: 数值

## 自定义配置

### 修改端口
在 `app.py` 中修改：
```python
app.run(debug=True, host='0.0.0.0', port=8080)
```

### 修改刷新频率
在 `dashboard.js` 中修改：
```javascript
setInterval(() => {
    // 刷新逻辑
}, 300000); // 5分钟 = 300000毫秒
```

### 修改图表样式
在 `dashboard.js` 中修改各个图表的 `option` 配置。

### 调整布局
在 `style.css` 中修改：
- `.dashboard` - 整体容器样式
- `.charts-row` - 图表行布局
- `.chart-item` - 单个图表容器
- `.chart` - 图表区域样式

## 故障排除

### 1. 数据文件未找到
- 确保Excel文件在项目根目录
- 文件名包含"香港"和"疫情"关键词

### 2. 依赖安装失败
- 检查网络连接
- 尝试使用国内镜像源
- 升级pip版本

### 3. 图表显示异常
- 检查浏览器控制台错误信息
- 确保ECharts库加载成功
- 检查数据格式是否正确

### 4. 端口被占用
- 修改 `app.py` 中的端口号
- 或停止占用端口的其他应用

### 5. 布局显示问题
- 检查浏览器窗口大小
- 确保CSS文件正确加载
- 尝试刷新页面

## 浏览器兼容性

- Chrome 60+
- Firefox 55+
- Safari 12+
- Edge 79+

## 许可证

MIT License

## 更新日志

### v1.1.0
- 优化布局设计，实现单屏展示
- 调整图表尺寸和间距
- 改进响应式设计
- 添加布局预览页面

### v1.0.0
- 初始版本发布
- 支持5个核心图表
- 响应式设计
- 实时数据更新 