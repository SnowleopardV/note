<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
	<script src="lib/vue-router.js"></script>
</head>

<body>
	<!-- 总结 -->
	<!-- 1.    watch监听vm实例属性的变化 -->
	<!-- 1.1   watch是一个对象,键是需要监听的表达式,值是当被监听的表达式的值发生变化时对应的回调函数-->
	<!-- 1.2   watch监听vm实例data数据的改变 -->
	<!-- 1.3   watch监听URL路径($route.path)的变化 -->
	<!-- 1.4   watch相对于keyup监听事件的优势: 
	       注意: watch可以监听非DOM元素数据的变化,例如URL地址的改变,这是keyup,mouseover等事件做不到的-->


	<!-- MVVM 中的 V -->
	<div id="app">
		<input type="text" v-model="name"><br>
		<router-link to="/login">登录页面</router-link>
		<router-link to="/register">注册页面</router-link>
		<router-view></router-view>
	</div>

	<template id="login">
		<div>
			<h1>这是登录页面</h1>
		</div>
	</template>

	<template id="register">
		<div>
			<h1>这是注册页面</h1>
		</div>
	</template>

	<script>
		let login = {
			template: '#login'
		}

		let register = {
			template: '#register'
		}

		let router = new VueRouter({
			routes: [{
					path: '/',
					redirect: "/login"
				},
				{
					path: '/login',
					component: login
				},
				{
					path: '/register',
					component: register
				}
			]
		})
		//MVVM 中的 VM
		let vm = new Vue({
			el: '#app',
			//MVVM 中的 M
			data: {
				name: ''
			},
			methods: {

			},
			router,
			watch: {
				// 1.1
				name: (newValue, oldValue) => {
					console.log(newValue, oldValue)
				},
				// 1.3
				//注意: 这里必须要使用'',不然会报错
				'$route.path': (newValue, oldValue) => {
					console.log(newValue, oldValue);
					if (newValue === '/login') {
						alert('欢迎进入登录页面')
					} else if (newValue === '/register') {
						alert('欢迎进入注册页面')
					}
				}
			}

		})
	</script>
</body>

</html